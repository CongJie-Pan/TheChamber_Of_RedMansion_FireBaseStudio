/*==========需要修改============*/
/*
1. 緒論部分要突出我們的創新之處在哪?(老師已為我們的創新之處在於知識圖譜，其實不是。知識圖譜是用別人建立好的資料的。)
   我認為我們的創新之處在於體查用戶的痛點，然後綜合不同的資源和方法去解決。
2. 再想想看要怎麼將內容做精簡，字太多了，最好能精簡到20幾頁就好。像可以不用講NACBCD只要講其核心就好，然後作為需求與市場分析的內容，不講NABCD但講其內容。
3. 需求分析的部分因為問卷不夠，所以可以先不講問卷統計內容，可以到之後成果發表時，再來提及。
*/
/*==============================*/



/*================ 封面頁設定 =================*/
// 封面頁
#let project_title = "紅樓慧讀：
紅樓夢整本書閱讀學習系統"
#let university = "私立中原大學"
#let department = "資訊管理學系"
#let doc_type = "專題計畫書"

// 封面頁設定
#page(header: none, numbering: none)[
  #set text(font: ("Times New Roman", "STKaiti", "SimSun", "Microsoft JhengHei UI"))
  #align(center)[
    #v(2cm)
    #text(size: 20pt, weight: "bold")[#university]
    #v(0.5cm)
    #text(size: 16pt)[#department #doc_type]
    #v(5cm)
    
    #text(size: 24pt, weight: "bold")[
      #project_title
    ]
    
    #v(8cm)
    
    #align(left)[
      #text(size: 14pt)[
        組員：\
        11144209 資管三乙 潘驄杰\
        11144224 資管三乙 蕭帛昊\
        11144155 資管三甲 鍾子傑
      ]
    ]
  ]
]

/*================ 文件格式設定 =================*/

// 文件格式設定，設定紙張大小為A4，邊距為2.5cm，頁碼為1，頁眉為空
#set page(
  paper: "a4",
  margin: (left: 2.5cm, right: 2.5cm, top: 2.5cm, bottom: 2.5cm),
  numbering: "1",
  header: [
    #set align(center)
    #text(10pt, university + " " + department + " " + doc_type)
    #line(length: 100%)
  ]
)

// 設定字體 - 優先使用楷體系列
#set text(
  font: ("Times New Roman", "STKaiti", "SimSun", "Microsoft JhengHei UI"),
  size: 12pt,
  lang: "zh",
  region: "TW"
)

// 設定段落格式為兩端對齊，行距為0.8em，首行縮排為2em
#set par(
  justify: true,
  leading: 0.8em,
  first-line-indent: 2em
)

// 根本性解決首行縮排問題 - 強制所有段落都有首行縮排
#show par: it => {
  // 確保每個段落都有正確的首行縮排設定
  set par(first-line-indent: 2em, justify: true, leading: 0.8em)
  it
}

// 特別處理標題後的段落，強制重置段落狀態
#show heading: it => {
  it
  // 在標題後添加一個空段落來重置狀態
  v(0pt)
  par()[#text(size: 0pt)[#h(0pt)]]
}

// 特別處理列表後的段落，確保首行縮排
#show list: it => {
  it
  // 在列表後添加重置段落狀態的機制
  v(0pt)
  par()[#text(size: 0pt)[#h(0pt)]]
}

#show enum: it => {
  it
  // 在列表後添加重置段落狀態的機制
  v(0pt)
  par()[#text(size: 0pt)[#h(0pt)]]
}

// 設定列表樣式 - 數字標號和列點都內縮兩個字元
#set list(indent: 2em, body-indent: 0.5em)
#set enum(indent: 2em, body-indent: 0.5em)



/*================ 標題樣式設定 =================*/

// 設定標題樣式
#set heading(numbering: (..nums) => {
  let level = nums.pos().len()
  if level == 1 {
    // 第一級標題：壹、貳、參...
    let chinese_nums = ("壹", "貳", "參", "肆", "伍", "陸", "柒", "捌", "玖", "拾")
    chinese_nums.at(nums.pos().at(0) - 1) + "、"
  } else if level == 2 {
    // 第二級標題：一、二、三...
    let chinese_nums = ("一", "二", "三", "四", "五", "六", "七", "八", "九", "十")
    chinese_nums.at(nums.pos().at(1) - 1) + "、"
  } else if level == 3 {
    // 第三級標題：(一)、(二)、(三)...
    let chinese_nums = ("一", "二", "三", "四", "五", "六", "七", "八", "九", "十")
    "(" + chinese_nums.at(nums.pos().at(2) - 1) + ")、"
  } else if level == 4 {
    // 第四級標題：1、2、3...
    str(nums.pos().at(3)) + "、"
  } else {
    // 第五級標題：(1)、(2)、(3)...
    "(" + str(nums.pos().at(4)) + ")、"
  }
})

// 設定一級標題樣式，一級標題前換頁，標題上方空隙0.5em，標題下方空隙0.3em
#show heading.where(level: 1): it => {
  pagebreak(weak: true)  // 一級標題前換頁
  v(0.5em)  // 標題上方空隙
  set text(size: 16pt, weight: "bold")
  it
  v(0.3em)  // 標題下方空隙
}

// 設定二級標題樣式，二級標題上方空隙0.3em，標題下方空隙0.2em
#show heading.where(level: 2): it => {
  v(0.3em)  // 標題上方空隙
  set text(size: 14pt, weight: "bold")  
  it
  v(0.2em)  // 標題下方空隙
}

// 設定三級標題樣式，三級標題上方空隙0.2em，標題下方空隙0.1em
#show heading.where(level: 3): it => {
  v(0.2em)  // 標題上方空隙
  set text(size: 12pt, weight: "bold")
  it
  v(0.1em)  // 標題下方空隙
}

// 設定四級標題樣式，四級標題上方空隙0.1em，標題下方空隙0.05em
#show heading.where(level: 4): it => {
  set text(size: 12pt, weight: "bold")
  it
}

// 設定五級標題樣式
#show heading.where(level: 5): it => {
  set text(size: 12pt, weight: "bold")
  h(2em) + it  // 縮一個排（2em）
}

/*================ 目錄頁設定 =================*/

// 目錄頁設定
#pagebreak()
#set page(numbering: "i")
#counter(page).update(1)

#align(center)[
  #text(size: 18pt, weight: "bold")[目錄]
]

#v(1cm)

#show outline.entry.where(level: 1): it => {
  v(0.5em, weak: true)
  strong(it)
}

#show outline.entry.where(level: 2): it => {
  h(1em) + it
}

#outline(
  title: none,
  indent: auto,
  depth: 3
)

/*================ 正文頁設定 =================*/

// 正文頁設定
#pagebreak()
#set page(numbering: "1")
#counter(page).update(1)

/*=============================================================*/

= 緒論


《紅樓夢》作為中國古典文學的巔峰之作，承載著深厚的文化內涵與精神底蘊，
不僅是文學經典，更是理解中華文化體系的核心入口。
掌握《紅樓夢》的文化精髓，等同於獲得解讀中華文化圈思維模式與價值體系的關鍵鑰匙。
然而，當代年輕讀者在古典文學閱讀中面臨三大核心困境：

1. 學習動力難以持續：讀者因缺乏即時回饋與明確學習里程碑，導致學習進度無法追蹤、成就感嚴重不足，最終選擇中途放棄。
2. 理解門檻過高：古文詞彙艱澀難懂、人物關係錯綜複雜，加上文化背景陌生，造成嚴重的閱讀障礙與故事內容情感疏離。
3. 專業資源零散：雖然市面上存在各種權威解讀資源，但這些資料分布零散，無法在閱讀當下提供即時輔助，缺乏系統化學習指導。

因而，我們的專案「紅樓慧讀」之核心創新點，首先在於在解決持續動機問題方面，系統採用遊戲化學習設計理念，將冗長的閱讀過程拆解為可管理的任務單元，透過「閱讀成就徽章」、「進度視覺化追蹤」、「個人化目標設定」的整合運用，打造如同闖關遊戲般的學習體驗，有效提升用戶學習動機並持續維持成就感與參與度。

其次，在降低理解門檻方面，系統於每章節閱讀時，提供互動式圖譜，實現基於人工智慧技術的章節內容自動知識圖譜生成功能。該技術能夠智能解析每個章節的文本結構、人物關係網絡、情節發展脈絡，從根本上解決人物關係複雜難以理解的問題。此外，於閱讀時，還加入了選字即問功能，用戶可選內文問AI，AI便會由紅學知識庫中，即時提供準確的權威解答。以此，全面提升用戶的閱讀理解體驗。

在專業資源零散方面，我們預定整合權威名家解讀資源，例如白先勇、歐麗娟、蔣勳、董梅等專家觀點之內容，彙整至我們的平台。使用戶可以在閱讀紅樓夢原文的同時，亦可以閱讀專家觀點，進而提升理解的高度。

此外，該專案的定位不僅是紅樓夢的學習平台，還是空閒閱讀時的一個好選擇。我們預定整合AI朗讀功能，讓用戶可以在空閒時間亦可用聽的方式，深度感受文本之美。

本專案的核心願景是運用先進數位科技重新詮釋與呈現《紅樓夢》的文化價值，讓這部傳世瑰寶能夠跨越時代隔閡，在現代社會中重新展現其文化魅力與教育意義。「紅樓慧讀」不僅是一個學習工具，更是一座連結古典精神與現代心靈的文化橋樑，致力於實現古典文化在數位時代的創新傳承與永續發展。
/*=============================================================*/

= 需求與市場分析

/*

可修改之處:

1. 一、概述的部分，NABCD 的介紹太長了，大概用四段話說明即可。並且要註明 NABCD 模型的理論文獻。
2. 二、NABCD 綜整分析，濃縮成大概三頁紙的量就好，這樣太多了，而且要表達準確。
3. 需求分析的內容我覺得可以，只是文字上要以段落表示，文字上還要再做優化。
4. 市場競爭者分析，我也覺得只是文字上要以段落表示，文字上還要再做優化即可。
5. 商業模式和推廣模式那，可以先在文字上做優化、簡化，轉成文字段落表示。你在編輯這塊的時候，可以在想想看這塊合不合理、設計得好不好，你可以再做修改。

*/

== 需求分析

「紅樓慧讀」系統的核心用戶群體為「有古典文學基礎但缺乏持續學習動力的學習者」，這一群體具備一定古典文學接觸經驗，對《紅樓夢》等經典名著有基本認知，但在實際閱讀過程中普遍面臨「讀了幾回就停止」的現象。

基於梁寧《產品思維課程》的用戶需求分析框架，古典文學閱讀中的用戶需求分為三個層次。核心痛點是持續學習動力缺失，表現為「害怕再次半途而廢」的恐懼心理，具體包括缺乏明確學習里程碑與成就感回饋機制、無法有效追蹤學習進度與掌握程度、缺少外部激勵與持續動力維持機制，以及對長篇古典文學的時間投入產生焦慮。重要痛點是理解障礙與文化隔閡，源於語言的時代隔閡、文化背景的斷層、人物關係的複雜性，以及缺乏專業解讀的引導。重要爽點體現在理解突破的即時滿足，包括即時詞義解析、AI智能問答的快速回應、視覺化人物圖譜的清晰認知，以及權威專家解讀帶來的深度理解滿足感。輔助癢點則是文化身份認同需求，滿足用戶對文化素養提升與社會認同的渴望。

根據需求優先級分析，核心功能需求包括動機維持系統（閱讀成就徽章系統、學習進度可視化追蹤、個人化目標設定機制）和理解輔助工具（上下文感知詞義解析系統、AI智能問答模組、互動式人物關係圖譜、權威專家解讀內容整合）。重要功能需求包括AI語音朗讀功能和設計為輔助性質的社群互動功能，支援「主要獨立閱讀，偶爾參與討論」的用戶偏好。

== 市場與競爭者分析

古典文學閱讀市場呈現多元化的解決方案格局，現有競爭者可分為三大類別：

#figure(
  table(
    columns: (1.5fr, 1.5fr, 2fr, 2fr),
    align: (left + horizon, left + horizon, left + horizon, left + horizon),
    stroke: 0.5pt,
    table.header(
      [*競爭者類別*], [*代表產品*], [*主要功能特色*], [*核心限制*]
    ),
    
    // 第一類：傳統紙質書籍與基礎電子書平台
    [*傳統紙質書籍與基礎電子書平台*],
    [四大名著合集：閱讀四大古典名著全集],
    [1.基本文白對照\     2.簡單註釋功能\
     3.書籤保存\
     4.進度記錄],
    [1.缺乏深度解析\
     2.無互動性設計\
     3.無法維持持續閱讀動力],
    
    // 第二類：進階古典文學閱讀工具
    table.cell(rowspan: 4)[*進階古典文學閱讀工具*],
    [讀典籍APP],
    [按句文白對照],
    [1.主要集中語言翻譯層面\
     2.缺乏深度解析與互動性],
    
    [古文島APP],
    [1.細緻分類系統\
     2.豐富內容],
    [1.僅有詩詞內容\
     2.缺乏趣味性],
    
    [詩雲APP],
    [1.專注詩詞欣賞\
     2.良好視聽體驗],
    [內容範圍有限],
    
    [識典古籍],
    [原文與古籍圖片對照],
    [1.回目有所缺漏\
     2.內容並不完整],
    
    // 第三類：知識服務平台與通用學習工具
    [*知識服務平台與通用學習工具*],
    [得到APP],
    [1.標準電子書格式\
     2.基礎AI朗讀服務\
     3.學習記錄追蹤\
     4.多領域專家課程],
    [1.缺乏古典文學相關功能(例如文白對照、即時註解、知識圖譜)\
     2.專家資源分散\
     3.未針對台灣地區優化]
  ),
  caption: [古典文學閱讀市場競爭者分析]
)

因此相較於現有競爭者，「紅樓慧讀」建立了四個關鍵領域的差異化競爭優勢，分別為：

#figure(
  table(
    columns: (1.5fr, 3fr),
    align: (left + horizon, left + horizon),
    stroke: 0.5pt,
    table.header(
      [*差異化優勢領域*], [*具體內容*]
    ),
    
    [*完整的動機維持生態系統*],
    [針對現有競品普遍缺失的核心功能，建立遊戲化學習機制與成就系統],
    
    [*AI系統性融合的技術創新*],
    [首創基於AI的章節知識圖譜自動生成系統，智能解析文本結構與人物關係],
    
    [*專業內容資源整合*],
    [建立涵蓋名家解讀、知識圖譜的完整體系，提供系統性古典文學專家解讀],
    
    [*情感定位與品牌價值*],
    [將閱讀體驗定位為溫暖的心靈避風港，滿足現代人對文化認同與心靈滋養的深層需求]
  ),
  caption: [「紅樓慧讀」差異化競爭優勢]
)

== 商業模式

「紅樓慧讀」採用「三級火箭+流量為王」的網路商業策略，目標在兩年內成為全台灣古典文學學習的流量入口，再透過多元化變現實現商業價值。商業邏輯遵循「先建立流量壟斷，後實現規模變現」的策略思維，前期專注用戶規模快速增長，不急於變現。

第一級火箭以「免費工具獲取流量」為核心理念，專注於建立台灣最大的古典文學閱讀流量池。系統提供完整《紅樓夢》原文閱讀器、智能人物關係圖譜、學習進度追蹤系統、基礎筆記分享功能、社群交流功能，以及紅樓夢閱讀時之AI問答服務。此階段目標是在第一年累積10萬註冊用戶。整個過程完全免費，透過解決古典文學閱讀痛點快速獲取用戶，建立產品不可替代性。

第二級火箭透過「智能平台提升黏性」策略建立用戶深度依賴。系統開始提供進階AI問答系統、學習成就系統。此階段仍以免費為主，部分進階功能開始引入輕度付費，主要目的是建立用戶對平台的深度依賴。此階段目標是在第一年累積20萬註冊用戶。

第三級火箭在用戶規模達到關鍵質量時啟動。為學校提供客製化教學解決方案，先與北一女中建立合作關係，成為指定學習工具，提供教師專用功能，支援課程教學和學生管理。此階段目標是在第一年累積30萬註冊用戶。

在推廣流量方面，社群流量戰略利用抖音、Instagram等平台進行內容行銷，與文學KOL和教師網紅合作擴大影響力範圍，設計病毒式分享機制鼓勵用戶主動傳播。SEO流量戰略搶佔「紅樓夢」、「古典文學」等核心關鍵字，建立內容資料庫提升搜索引擎排名，與教育和文化網站建立外鏈合作。

= 系統分析與設計

== 用戶與系統流程圖

=== 用戶流程圖

#image("systemGraph/FlowChart/UserFlow/userFlowChart.jpg", width: 90%)
#align(center)[
  圖一、紅樓夢整本書閱讀學習系統:用戶流程圖
]

該用戶流程圖，描述了用戶由進入系統至結束系統之步驟。首先，面臨身份識別的決策點。系統會判斷用戶是否為新用戶，形成兩個不同的認證路徑。對於新用戶，系統引導其進入「註冊新帳號」流程，需要完成「填寫用戶初步表單」來建立個人檔案，這個步驟對應於架構圖中提到的功能問卷調查，用於收集用戶的閱讀興趣、學習水平等基礎信息。而既有用戶則直接進入「登入」流程，通過身份驗證後即可進入系統。無論選擇哪個路徑，最終都會匯聚到系統的核心控制中心——「首頁」。

進入首頁後，用戶面臨「選擇功能」的關鍵決策點，系統提供四大主要功能入口。第一個是「閱讀頁面」，這是系統的核心閱讀功能，提供原文與名家解讀的對照學習體驗。第二個是「人物關係圖譜頁面」，透過視覺化方式呈現《紅樓夢》複雜的人物關係網絡。第三個是「成就系統頁面」，負責追蹤用戶的學習進度、設定目標，並提供激勵機制來維持學習動力。第四個是「發文參與討論分享」功能，對應社群互動模組，讓用戶能夠參與討論、分享學習心得。

以下，則說明用戶進入閱讀頁面之流程。首先，當用戶選擇進入「閱讀頁面」後，預設會進到閱讀紅樓夢原文的頁面。而於此，系統提供五種不同的學習方式來滿足多元化的學習需求。

第一，「選取內文紀錄筆記」功能讓用戶能夠在閱讀過程中做筆記和標記重點內容。第二，「選取內文向AI問答」提供智能互動體驗，用戶可以針對特定文本段落提問，獲得AI的即時解答。第三，顯示章回之知識圖譜，以及白話文。第四，「閱讀紅樓夢原文」是最基礎的文本閱讀功能，提供完整的原著內容。第五，「閱讀名家解讀內容」整合了白先勇、歐麗娟、蔣勳、董梅等專家的深度解析，用戶可以再行於此頁面額外選擇閱讀，為用戶提供多角度的理解視角。第五，「AI朗讀內文」則提供多媒體學習體驗，通過語音朗讀和背景音效創造沉浸式的閱讀環境。

最後，完成任一功能的使用後，系統設計了完善的循環機制來維持用戶的學習連續性。通過「繼續使用」的決策點，預設用戶可以選擇返回首頁繼續探索其他功能，形成一個完整的學習閉環。當用戶完成學習任務或希望離開系統時，可以選擇「否」，完成整個用戶流程。

== 系統架構圖

/*資料庫部分有需要分不同的資料庫嗎？因為不同資料庫之間的資料表連接是連接不起來的。可不可以都放在同一個資料庫裡面？
還有為何還要額外分成一個MangoDB，語音的部分不用自己存語音阿，只要有文本就好，直接調用外部API就好阿? */

/*通常開發時就只要一個資料庫就好，為何要分成多個資料庫呢*/

/*Postgrade 就不能存音檔、圖片嗎？*/

/*後續畫ERD時，在挑選幾個重要的資料表呈現即可，不用每個資料表都用ERD。*/

#align(center)[
  #image("systemGraph/StuctureGraph/structureGraph_main.jpg", width: 100%)
]
#align(center)[
  圖三、紅樓夢整本書閱讀學習系統:系統架構圖
]

首先，在系統的前端介面層，以「首頁」作為核心導航中樞。用戶可透過「訪客介紹頁面」了解系統功能後，再經由「登入註冊頁面」建立帳戶或進行身份驗證。成功登入後進入首頁，可選擇四大核心功能：「閱讀頁面」提供沉浸式閱讀體驗、「成就系統頁面」展示學習成果與激勵機制、「討論互動社群頁面」促進用戶間的討論交流，以及「總人物關係圖譜頁面」呈現紅樓夢複雜的人物關係網絡。

接下來，API服務層採用API Gateway架構模式，作為前端與後端服務之間的統一入口點。所有來自前端的請求都會先經過API閘道器進行路由分發、身份驗證、請求限流與安全檢查。這種設計不僅簡化了前端的複雜性，也提供了統一的安全控制點，確保系統的可維護性與擴展性。API Gateway同時負責將用戶請求轉發至適當的後端服務，並將處理結果回傳給前端介面。

之後，後端服務層共包含七個核心服務模組，每個都有獨特的色彩標識：

1. 用戶登入註冊認證服務（淡藍色）：專責身份管理，直接連接外部服務的第三方登入，以及用戶基本資料存取層。

2. *原文與專家解讀內容服務（淡粉色）*：處理主要文本顯示內容，連接用戶內容資料存取和知識資料存取，以獲取原文與專家解讀內容，還有閱讀進度。

3. *AI問答服務（淡綠色）*：提供AI智能輔助功能，主要連接知識資料存取，以及外部LLM引擎Perplexity API，予以生成答案。之後，亦連接用戶內容資料庫，記錄該用戶與AI互動的資料歷程。

4. *媒體管理服務（淡橘色）*：專門處理多媒體內容，直接對應媒體資料存取層。

5. *成就系統服務（淡紫色）*：管理用戶成就與學習進度，連接用戶內容資料存取。

6. *知識圖譜生成服務（深綠色）*：負責動態生成總人物關係網絡圖譜，對應知識資料存取層，此部分知識圖譜資料直接由資料庫存取即可。而另一個依文本自動生成章節圖譜，需整合LLM Agent進行實體識別與關係抽取，實現章節級別的知識圖譜自動生成功能。以便用戶閱讀時，可以點選查看知識圖譜，快速了解用戶閱讀該章節的內容。

7. *社群互動服務（藍色）*：支援用戶交流討論，同樣連接用戶內容資料存取。

所有後端服務都統一通過API Gateway進行請求路由，然後依據功能需求連接到四個專門的資料存取層。*與原先的多資料庫設計不同，新架構採用簡化的單一資料庫策略*：

1. *用戶基本資料存取層*：管理用戶帳戶與權限資訊
2. *用戶內容資料存取層*：管理進度、筆記與討論成就資料
3. *知識資料存取層*：處理紅樓夢文本知識、專家解讀內容，以及知識圖譜資料
4. *媒體資料存取層*：管理多媒體檔案的元數據與路徑資訊

*所有資料存取層統一連接至「統一資料庫 PostgreSQL」，該資料庫包含所有業務資料*。這種設計大幅簡化了資料庫管理複雜性，避免了跨資料庫連接的技術障礙，同時保持了邏輯上的資料分層概念。


之後，系統整合四項關鍵外部服務以增強功能性：

1. *「第三方登入」服務*：提供便捷的社交媒體帳戶登入選項，例如Google帳號綁定登入。

2. *「AI問答外部API：Perplexity」*：連接Perplexity這類強大的AI搜索工具，提供強大的解答問題能力。

3. *「AI語音朗讀服務API」*：連接外部語音服務API，將文本轉成語音供聆聽，提升閱讀體驗的多元化。

4. *「依文本自動生成圖片與關係 LLM Agent（實體識別+關係抽取）」*：*這是系統的核心創新功能，負責章節知識圖譜的智能生成。該Agent能夠分析章節文本內容，自動識別人物實體、抽取關係網絡，並生成可視化的知識圖譜，為用戶提供動態的章節理解輔助工具。*

== 資料庫設計

/* 
To Do: ERD 需要再直接draw.io手繪表示 並且讓AI直接讀圖解釋，綜合以上兩個部分輸出。之後解決表格文字超出問題 
*/

/*
#image("systemGraph/ERD/ERD.png", width: 100%)
#align(center)[
  圖二、紅樓夢整本書閱讀學習系統ERD圖
]
*/

「紅樓慧讀」資料庫系統採用分散式多資料庫架構，為古典文學智能閱讀學習平台提供全方位的數據支撐。系統打破傳統單一資料庫的設計模式，根據業務邏輯和數據特性，將資料分別儲存在四個專門的資料庫中：用戶基本資料庫、用戶內容資料庫、紅學知識庫，以及媒體資料庫，為系統的微服務架構提供了強大的數據基礎。以下概述各資料庫的設計與功能：

1. *用戶基本資料庫（PostgreSQL）*；作為身份管理的核心，專責處理用戶註冊認證、基本資料維護、系統偏好設定等功能。該資料庫支援多種第三方登入方式的整合，包含Google之OAuth認證提供者，同時實現嚴格的資料安全控制和隱私保護機制。

2. *用戶內容資料庫（PostgreSQL）*：承載用戶學習歷程的完整記錄，包含閱讀進度追蹤、學習成就管理、每日學習統計、AI問答歷史、社群互動記錄等動態數據。此資料庫設計支援高頻寫入操作，配置優化的索引策略以確保學習數據的即時更新和快速查詢。

3. *紅樓夢文本知識庫（PostgreSQL）*：儲存《紅樓夢》120回原文、白話文對照、章節註解、專家解讀等結構化內容，為系統提供完整的文本資料基礎，支援全文檢索和內容分析功能。

4. *紅樓夢人物知識圖譜資料庫（Neo4j）*：採用圖形資料庫架構，專門管理複雜的人物關係網絡、典故關聯、知識實體連結等圖譜數據。此資料庫建構了完整的人物關係圖譜，包含血緣關係、社會關係、情感關係等多維度連結，為智能問答和知識探索提供強大的圖形查詢能力。

5. *媒體資料庫（MongoDB）*：採用文件型資料庫設計，專門管理AI語音朗讀檔案、人物插畫、章節配圖等多媒體內容的元數據和檔案索引，支援靈活的檔案格式和大容量儲存需求。

而後，透過以上各資料庫ERD圖，以下進行資料庫設計的說明解釋。不過，關於*紅樓夢人物知識圖譜資料庫（Neo4j）*，因為其Neo4j圖形資料庫採用的節點-關係架構，而ERD主要設計用於展現關聯式資料庫的表格關聯，兩者在技術架構上根本不匹配。再者，《紅樓夢》包含400多個人物及七種複雜關係類型，若用ERD呈現會導致圖形過於擁擠且無法有效表達關係的動態性與多維屬性，因此暫不展示其資料庫ERD圖。

=== 用戶基本資料庫ERD圖

#align(center)[
  #image("systemGraph/ERD/ERD_UserBasicInfo.jpg", width: 100%)
]
#align(center)[
  圖四、用戶基本資料庫ERD圖
]

==== 實體 (Entities) 

這個資料庫設計包含四個主要的資料表。Users表是整個系統的核心，就像會員資料庫一樣，記錄所有用戶的基本資料；User_Preferences表專門存放每個用戶的個人設定，像是字體大小、主題顏色等偏好；User_Auth_Providers表負責管理用戶的登入方式，支援Google等第三方帳號登入功能；System_Config表則像是系統的控制面板，存放各種系統設定參數，讓管理員可以靈活調整系統運作方式。

==== 屬性 (Attributes)

每個資料表都經過仔細設計，確保能滿足系統需求。Users表使用UUID作為每個用戶的唯一識別碼，就像身分證字號一樣不會重複，並設定email和username不能重複註冊，還有user_type欄位來區分「笨笨、準大明、大明」三種用戶等級。User_Preferences表採用靈活的設計方式，一些常用的設定（如字體大小、主題模式）直接用專門欄位儲存以提高查詢速度，複雜的設定（如通知選項、無障礙功能）則用JSON格式儲存以保持彈性。User_Auth_Providers表遵循OAuth2.0安全標準，確保第三方登入的安全性。System_Config表使用JSON格式儲存設定值，讓系統可以動態調整各種參數。

==== 關係 (Relationships) 

這些資料表之間有明確的關聯設計。Users表和User_Preferences表是一對一的關係，意思是每個用戶最多只會有一套個人設定，透過user_id來連結兩個表。Users表和User_Auth_Providers表是一對多的關係，表示一個用戶可以綁定多種登入方式（比如同時可以用Google和Facebook登入），讓使用更方便。System_Config表則是獨立運作，不直接連結其他表，這樣可以確保系統設定的安全性，避免被一般用戶誤改。

==== 基數 (Cardinality) 

===== 用戶與偏好設定的關係
  
從ERD圖可以看出，每個用戶帳戶可以有零個或一個偏好設定記錄。這就像是每個人都可以選擇要不要自訂手機的個人化設定一樣。當用戶剛註冊時，系統會使用預設的設定（比如預設字體大小、淺色主題等），用戶不一定要立刻去調整這些設定。只有當用戶想要改變閱讀字體大小、切換深色模式、調整AI朗讀速度等個人偏好時，系統才會在偏好設定表中為這個用戶建立一筆專屬的設定記錄。這種設計讓新用戶可以快速開始使用系統，不會被複雜的設定流程嚇跑。

===== 用戶與第三方登入的關係

每個用戶可以選擇綁定零個或多個第三方登入方式。這就像現在很多APP都支援「用Google帳號登入」、「用Facebook登入」等功能一樣。用戶可以選擇只用email和密碼登入（傳統方式），也可以同時綁定Google等多個平台帳號，讓登入更方便。比如說，用戶可能在家用電腦習慣用Google登入，在手機上習慣用LINE登入，系統都能支援。這種彈性設計讓用戶可以根據自己的使用習慣選擇最方便的登入方式，提升使用體驗。

=== 用戶內容資料庫ERD圖

#rotate(90deg, origin: center, reflow: true)[
  #image("systemGraph/ERD/ERD_UserContent.jpg", width: 91%)
]
#align(center)[
  圖五、用戶內容資料庫ERD圖
]

==== 實體 (Entities)

這個UserContent資料庫包含了9個核心實體和2個外部參考實體，形成一個完整的學習與社群生態系統。在學習追蹤方面，User_Reading_Progress（用戶閱讀進度）作為學習系統的心臟，就像一本數位學習日記，詳細記錄每位用戶對每個章節的學習歷程，包括讀到哪裡、花了多少時間、理解程度如何等關鍵資訊。

Learning_Achievements（學習成就）則是遊戲化學習的核心，儲存用戶獲得的各種學習里程碑，如「完成首章閱讀」、「連續學習7天」等成就徽章。Achievement_Rules（成就規則）扮演著「遊戲規則書」的角色，使用JSON格式儲存複雜的觸發條件，讓系統能動態判斷用戶是否達成特定成就。

在AI問答系統方面，QA_Sessions（問答會話）管理用戶與AI的對話脈絡，每次用戶開始針對特定章節提問時，系統會建立一個會話來維持對話的連貫性和情境。QA_Messages（問答訊息）則儲存問答對話中的每一條訊息，包括用戶問題和AI回答，同時記錄AI的信心分數、回應時間、引用來源等元資料，用於優化AI表現。

社群互動功能由多個實體組成：Forum_Categories（論壇分類）組織討論區的主題分類，支援階層式結構，並控制不同用戶群體的訪問權限；Forum_Posts（論壇帖子）承載用戶發表的討論文章，支援多種內容格式，可標記相關章節和標籤，並追蹤各種互動數據；Forum_Replies（論壇回覆）處理帖子的回應內容，支援多層回覆結構，並可標記最佳答案。

User_Interactions（用戶互動）統一記錄所有用戶互動行為，透過多態設計可追蹤對不同類型對象的各種行為。最後，Users（用戶）和Chapters（章節）作為外部參考實體，分別來自用戶基本資料庫和紅學知識庫。

==== 屬性 (Attributes)

每個實體都配備了精密的屬性設計來支援系統的各項功能。

在智慧型追蹤方面，系統採用完整的時間序列屬性，如created_at、updated_at、last_accessed等時間戳記，建構完整的用戶行為時間軸，用於分析學習模式和系統使用習慣。進度量化屬性包括progress_percentage（0-100的精確進度）、time_spent（秒級時間追蹤）、reading_sessions（學習次數統計），提供科學化的學習數據分析基礎。

在個性化學習方面，系統收集主觀評估屬性如difficulty_rating（1-5難度評分）、session_rating（會話評分），讓用戶表達主觀感受，結合客觀數據形成完整的學習畫像。理解度評估屬性comprehension_score透過AI問答互動計算理解度分數，confidence_score記錄AI回答的可信度，建立雙向的學習品質評估機制。

內容管理方面，系統採用彈性內容屬性設計，content_type支援多種格式（text、markdown、rich_text），message_metadata使用JSON儲存AI相關元數據，提供豐富的內容展示和分析能力。社群運營屬性包括view_count、like_count、reply_count等互動統計，is_pinned、is_featured等編輯推薦標記，支援社群內容的運營管理。

系統效能優化方面，response_time（AI回應時間）、tokens_used（Token消耗量）用於監控系統效能和成本控制，user_feedback（helpful/neutral/unhelpful）收集用戶對AI回答的反饋，持續優化AI服務品質。

==== 關係 (Relationships)

實體間的關係設計充分體現了系統的業務邏輯流程。學習路徑追蹤透過用戶與閱讀進度的tracks關係，進度記錄與章節的tracked_in關係，形成「用戶→進度→章節」的完整學習追蹤鏈。這種設計讓系統能精確知道每位用戶在每個章節的學習狀況，支援個性化推薦和學習路徑規劃。

情境化問答系統透過context_for關係將會話與特定章節關聯，確保AI回答的情境相關性。會話透過contains關係包含多個訊息，形成完整的對話脈絡，讓AI能提供更準確、連貫的回答。動態成就系統中，用戶透過earns關係獲得學習成就，而成就的獲得條件由Achievement_Rules實體的JSON格式規則定義，這種設計讓系統能靈活調整成就規則，無需修改資料庫結構就能推出新的激勵機制。

社群生態關係設計包含多個層面：Forum_Categories透過parent-child自我關聯實現分類階層，Posts透過categorizes關係歸屬於分類；Posts透過has關係包含多個Replies，Replies透過parent-child自我關聯支援多層回覆；User_Interactions透過多態設計（target_type+target_id）可以記錄對任何類型對象的互動行為，提供統一而靈活的互動追蹤機制。

==== 基數 (Cardinality)

ERD中的基數設計精確反映了真實的業務規則與用戶行為模式。在一對多學習追蹤關係方面，採用用戶中心設計，一個用戶可以有多個閱讀進度（每章節一個）、多個成就記錄、多個問答會話，但每筆記錄只屬於一個用戶，確保學習數據的歸屬清晰。同時，多個用戶可以閱讀同一章節，多個問答會話可以基於同一章節進行，實現學習資源的高效利用。

階層式內容組織關係中，Forum_Categories的自我關聯實現無限層級的分類階層，支援複雜的內容組織需求；一個發文可以有多個直接回覆，每個回覆又可以有多個子回覆，形成樹狀的討論結構，促進深度討論的發展。

彈性互動追蹤關係透過User_Interactions實體的多態關聯設計，一個用戶可以對多種不同類型的對象（發文、回覆、章節、角色等）進行各種互動行為，同時每種對象也可以被多個用戶互動，形成靈活的多對多關係。成就系統採用彈性關係設計，一套成就規則可以觸發多個用戶的成就獲得，而一個用戶也可以根據不同規則獲得多種成就，這種多對多關係透過Learning_Achievements實體來記錄具體的成就獲得事件，包含獲得時間、積分等詳細資訊，形成完整的激勵循環機制。

=== 紅樓夢文本知識庫ERD圖

#rotate(90deg, origin: center, reflow: true)[
  #image("systemGraph/ERD/ERD_RC_TextContent.jpg", width: 91%)
]
#align(center)[
  圖六、紅樓夢文本知識庫ERD圖
]

==== 實體 (Entities)

此紅樓夢文本知識庫包含四個核心實體和兩個外部參考實體，構成一個完整的古典文學知識管理系統。Chapters（章節）作為整個知識庫的骨幹，就像一部《紅樓夢》的數位版目錄，儲存從第一回到第一百二十回的完整章節資訊。每個章節不僅包含古文原文和白話文對照，還整合了章節摘要、重要人物地點事件的結構化資料，以及詩詞內容的特別標記，為讀者提供全方位的閱讀支援。

Chapter_Annotations（章節註解）扮演著「數位註腳」的角色，針對原文中的難詞、典故、文化背景、寫作技巧等提供精確的解釋說明。這個實體的設計特別巧妙，透過position_start和position_end欄位精確標記被註解文字在原文中的位置，讓系統能在用戶閱讀時即時彈出相關解釋，就像古代書籍的旁批側註一樣，但更加智能化和互動化。

Expert_Commentaries（專家解讀）收錄了紅學專家對各章節的深度分析與見解，就像一個「名家解讀資料庫」。這些解讀涵蓋文學分析、歷史背景、人物心理等多個角度，為不同層次的讀者提供專業的學習指引。系統透過標籤分類和難度分級，讓用戶能根據自己的理解程度選擇合適的解讀內容。

Knowledge_Entities（知識實體）是整個知識庫中最具創新性的設計，它將《紅樓夢》中出現的典故、詩詞、地點、文化物品等抽象概念實體化管理。這就像建立了一個「紅樓夢百科全書」，每個知識點都有完整的文化背景、歷史意義和現代詮釋。特別值得注意的是embedding_vector欄位，它將每個知識實體轉換為向量表示，支援AI語意搜尋和智能推薦功能。

==== 屬性 (Attributes)

Chapters實體採用雙語對照設計，original_text儲存古文原文，modern_text提供白話文翻譯，確保不同程度的讀者都能理解內容。content_version和is_published欄位建立了完整的內容版本管理機制，讓編輯團隊能持續更新和優化內容品質。word_count和reading_time_estimate提供科學化的閱讀時間估算，幫助用戶規劃學習進度。

系統大量使用JSON格式儲存複雜的結構化資訊，如key_characters、key_locations、key_events等，這種設計讓系統能靈活處理《紅樓夢》中複雜的人物關係和情節發展。poetry_content特別針對詩詞內容進行結構化儲存，支援詩詞的單獨檢索和分析功能。

Chapter_Annotations的position_start和position_end實現了文字級別的精確定位，annotation_type透過枚舉類型清楚分類註解的性質（詞彙、文化、典故、技巧等）。這種精細化的標記系統讓AI能提供更準確的情境化幫助。

Expert_Commentaries詳細記錄expert_name和expert_title，建立專家解讀的權威性和可信度。commentary_type分類不同的解讀角度，view_count和is_featured支援內容的運營推廣，讓優質解讀能獲得更多曝光。

Knowledge_Entities的embedding_vector是整個系統AI能力的核心，它將文化概念轉換為高維向量空間中的點，讓AI能理解不同概念間的語意關聯。search_keywords提供多維度的搜尋入口，difficulty_level確保內容能根據用戶程度進行適配。

==== 關係 (Relationships)

整個知識庫以Chapters為中心，透過一對多關係連接Chapter_Annotations和Expert_Commentaries，形成「章節→註解」和「章節→專家解讀」的知識組織結構。這種設計確保了所有輔助學習資源都能準確對應到具體的章節內容，用戶在閱讀任何章節時都能獲得完整的學習支援。

透過tracked_by關係，Chapters與外部User_Reading_Progress連接，實現學習進度的精確追蹤。同時，provides_context_for關係將章節與QA_Sessions關聯，確保AI問答功能能獲得準確的上下文資訊，提供更相關和準確的回答。

雖然ERD中沒有直接顯示，但Knowledge_Entities透過related_chapters和related_characters的JSON欄位，實際上建立了一個複雜的知識關聯網絡。這種設計讓系統能展現《紅樓夢》中的知識點如何在不同章節間交織出現，幫助用戶建立更完整的理解。

==== 基數 (Cardinality)

每個章節可以包含多個註解和多個專家解讀，但每個註解和解讀只針對一個特定章節。這種一對多關係反映了知識學習的層次性：基礎的文本理解需要詳細的註解支援，深度的文學鑑賞需要專家的多角度解讀。一個章節通常會有數十個註解（針對難詞、典故等）和數個專家解讀（從不同角度分析），為用戶提供從基礎到進階的完整學習階梯。

Knowledge_Entities實體透過related_chapters的JSON欄位，與多個章節建立關聯，形成多對多的知識網絡。例如，「大觀園」這個地點實體會關聯到多個章節，而每個章節也會涉及多個知識實體。這種設計讓用戶能從不同角度探索《紅樓夢》的知識世界，發現章節間的隱性連結。

一個章節可以被多個用戶閱讀（產生多個閱讀進度記錄），也可以成為多個AI問答會話的背景語境。這種多對多的跨資料庫關聯確保了知識內容能服務於不同用戶的個性化學習需求，同時讓AI問答系統能基於準確的文本語境提供專業回答。

透過content_version屬性，系統支援內容的版本化管理，確保學術研究的嚴謹性。當專家學者提出新的解讀觀點或發現史料錯誤時，系統能保持內容的持續更新，同時維護版本歷史，為學術討論提供可追溯的基礎。這個文本知識庫的設計巧妙地平衡了古典文學的深度內容與現代數位技術的便利性，不僅保存了《紅樓夢》的原始文本價值，更透過結構化的註解、專業的解讀和智能化的知識組織，為現代讀者打造了一個真正有用的古典文學學習平台。

=== 媒體資料庫ERD圖

#align(center)[
  #image("systemGraph/ERD/ERD_mediaDB.jpg", width: 100%)
]
#align(center)[
  圖七、媒體資料庫ERD圖
]

==== 實體 (Entities)

這個媒體資料庫採用MongoDB文件型資料庫設計，包含兩個核心實體和四個外部參考實體，構成一個完整的多媒體內容管理生態系統。media_files（媒體檔案）作為整個媒體庫的核心實體，就像一個智能化的「數位媒體倉庫」，統一管理所有與《紅樓夢》學習相關的多媒體內容，包括AI語音朗讀檔案、人物插畫、章節配圖、專家解讀錄音等。這個實體不僅儲存檔案的基本資訊，更重要的是透過靈活的物件結構記錄檔案的使用情況、存取權限和詳細元數據，確保每個媒體檔案都能在合適的學習情境中發揮最大價值。

user_media_preferences（用戶媒體偏好）扮演著「個人化媒體助理」的角色，專門記錄每位用戶對多媒體內容的個人偏好和使用習慣。這個實體就像是每個用戶的專屬「媒體日記」，記錄著用戶喜歡的語音朗讀速度、音量設定、播放歷史、收藏的音頻片段等個人化資訊。系統透過這些偏好資料，能為用戶提供更貼心的學習體驗，比如自動調整到用戶習慣的朗讀速度，或推薦相似風格的專家解讀音頻。

外部參考實體包括Users（用戶）、Chapters（章節）、Characters（人物）和Expert_Commentaries（專家解讀），這些實體來自其他資料庫，但與媒體檔案建立了重要的關聯關係，確保多媒體內容能準確對應到具體的學習情境和用戶需求，形成一個跨資料庫的完整學習支援網絡。

==== 屬性 (Attributes)

media_files實體採用MongoDB的文件型設計，使用ObjectId作為id主鍵，這是MongoDB的原生識別機制，同時配置file_id作為UUID唯一鍵，確保跨系統的檔案識別能力。file_type透過枚舉值（audio、image、video）清楚分類媒體類型，original_filename保留原始檔案名稱以維護檔案來源的可追溯性。storage_path記錄檔案在檔案系統中的實際存放位置，支援分散式儲存架構，file_size和mime_type提供檔案的技術規格資訊，duration專門針對音頻和視頻檔案記錄播放時長，這些屬性對於系統效能優化和用戶體驗預期管理非常重要。

系統大量使用Object類型儲存複雜的結構化資訊，充分發揮了MongoDB對複雜資料結構的原生支援能力。related_content物件記錄檔案與其他內容的關聯關係，metadata物件儲存豐富的檔案元數據（如音頻的取樣率、圖片的解析度等），access_control物件管理精細化的權限控制，usage_stats物件追蹤檔案的使用統計數據。這種物件化設計讓系統能靈活處理不同類型媒體檔案的特殊需求，同時為未來的功能擴展預留了充足的彈性空間。

user_media_preferences的設計同樣體現了MongoDB的文件型優勢，audio_preferences物件儲存用戶的音頻偏好設定，如朗讀語速、音量、音色偏好等細節設定。playback_history陣列記錄用戶的完整播放歷史，bookmarks陣列讓用戶能收藏喜愛的音頻片段或圖片，這些陣列型屬性讓系統能維護豐富的用戶行為記錄，為個性化推薦和學習分析提供深度數據支援。

==== 關係 (Relationships)

user_media_preferences透過playback_history和bookmarks兩種不同的關聯方式與media_files建立連接，形成「用戶偏好→媒體檔案」的個人化關聯架構。playback_history記錄用戶的主動播放行為，反映用戶的實際學習軌跡和內容偏好，bookmarks記錄用戶的主動收藏行為，代表用戶對特定內容的重視程度。這種雙重關聯設計讓系統能從不同角度深度理解用戶的媒體使用模式和喜好傾向，為智能推薦算法提供精確的數據基礎。

media_files與多個外部實體建立has_media_for關係，形成「內容→媒體」的豐富關聯網絡。Chapters可以關聯朗讀音頻、背景音樂、配圖等多種媒體檔案，Characters可以關聯人物插畫、語音介紹、相關音樂等個性化媒體內容，Expert_Commentaries可以關聯專家解讀錄音、解析圖表、輔助影片等專業媒體資源。這種多對多的跨資料庫關聯確保了每個學習內容都能配備相應的多媒體支援，為用戶提供全方位的感官學習體驗。

Users與user_media_preferences建立一對一的has關係，確保每個用戶都有獨立的媒體偏好空間。這種設計不僅保障了用戶隱私，更讓系統能為每位用戶建立專屬的媒體使用檔案，實現真正的個人化服務，無論是學習進度同步還是偏好設定遷移都能得到完善支援。

==== 基數 (Cardinality)

每個章節、人物或專家解讀可以關聯多個不同類型的媒體檔案，但每個媒體檔案通常專門服務於特定的內容情境。例如，第一回可能包含完整章節朗讀音頻、重點段落解析音頻、人物關係圖、場景插畫、背景音樂等多個媒體檔案，每種媒體都為不同的學習需求服務。這種一對多關係讓學習內容能提供豐富的多感官學習體驗，滿足視覺型、聽覺型等不同學習風格用戶的需求，同時也支援多元智能理論在古典文學教育中的應用。

每個用戶對應一個媒體偏好記錄，這種一對一關係確保了個人化設定的獨立性和隱私性。用戶的音頻偏好、播放歷史、收藏內容都是專屬且私密的，系統會嚴格保護這些個人數據，不會與其他用戶混淆或洩露。當新用戶註冊時，系統會自動建立對應的偏好記錄，採用系統預設的合理設定值，用戶可以根據自己的習慣隨時調整這些設定，讓學習體驗更加舒適和高效。

透過playback_history和bookmarks陣列，一個用戶可以播放和收藏多個媒體檔案，同時一個受歡迎的媒體檔案（如名家朗讀的經典片段）也可以被多個用戶播放和收藏。這種多對多關係透過MongoDB的陣列欄位得到優雅的實現，避免了傳統關聯式資料庫需要建立複雜中間表的設計難題。系統能透過分析這些互動數據，識別熱門內容、發現用戶群體的共同偏好，並據此優化內容推薦和系統效能。

media_files的usage_stats物件記錄檔案的詳細使用統計，access_control物件管理細緻的存取權限，這些設計支援動態的檔案生命週期管理。熱門檔案可能需要進行快取優化或CDN分發，長期未使用的檔案可能需要歸檔處理或壓縮儲存，系統可以根據這些統計資料和使用模式做出智能化的資源管理決策，確保儲存成本的控制和用戶存取體驗的最佳化。這個媒體資料庫的設計充分發揮了MongoDB文件型資料庫的優勢，不僅提供了靈活的資料結構支援，更建立了以用戶體驗為中心的媒體管理機制，讓古典文學的學習變得更加生動和個人化。

== 前端介面設計

==== 介紹頁

#align(center)[
  #image("UiPicture\introductionPage\introductionPage.png", width: 90%)
]
#align(center)[
  圖八、介紹頁面
]

來到「紅樓慧讀」的介紹頁，映入眼簾的，是融合紅樓夢中，傳統中國紅與雅致金色的主視覺設計，旨在營造溫暖而富有文化底蘊的氛圍。簡潔的導航欄置於頂部，包含「主頁」、「特色」及「主要功能」等核心區塊的快速入口，並提供中英文切換選項，確保您能順暢地探索本站。

向下滾動，將首先深入了解閱讀經典時常遇到的「挑戰」，我們以圖文並茂的卡片形式，清晰呈現讀者痛點。緊接著，「紅樓慧讀的智能方案」區塊則詳細闡述了我們如何運用資訊技術克服這些障礙，每一項解決方案都配有精心設計的圖標和簡明扼要的說明。最後，頁面底部的行動呼籲區塊，以醒目的按鈕邀請您「免費註冊」，開啟您的智慧閱讀之旅。頁腳部分則提供了關於我們與競賽的相關資訊，整體設計力求在傳遞信息的同時，保持視覺上的雅緻與和諧。

==== 登入與註冊頁面

#grid(
  columns: 2,
  gutter: 1em,
  align(center)[
    #image("UiPicture/RegisterLoginPage/LoginPage.jpg", width: 100%)
    圖九、登入頁面
  ],
  align(center)[
    #image("UiPicture/RegisterLoginPage/RegisterPage_1.jpg", width: 100%)
    圖十、註冊頁面(填寫基本資訊)
  ]
)

#grid(
  columns: 2,
  gutter: 1em,
  align(center)[
    #image("UiPicture/RegisterLoginPage/RegisterPage_2.jpg", width: 100%)
    圖十一、註冊頁面(簡單選填古典文學能力基礎)
  ],
  align(center)[
    #image("UiPicture/RegisterLoginPage/RegisterPage_3.jpg", width: 100%)
    圖十二、註冊頁面(填寫對紅樓夢感興趣之處)
  ]
)

#align(center)[
  #image("UiPicture/RegisterLoginPage/RegisterPage_4.jpg", width: 55%)
  圖十三、註冊頁面(填寫使用本平台的用途)
]

註冊流程採用了沉浸式的分步設計，將帳戶創建與個人化資訊收集分解為簡潔的獨立頁面。每一頁都聚焦於單一或少量相關的資訊輸入，從基礎的帳號密碼，到學習背景、閱讀興趣及目標，引導用戶逐步完成。視覺上，註冊卡片延續了應用程式典雅的中國風配色與清晰的排版，確保了品牌一致性與閱讀舒適度。透過明確的步驟指示與便捷的前後導航按鈕，我們致力於提供一個流暢、直觀且無壓力的註冊體驗。

==== 首頁

#align(center)[
  #image("UiPicture\mainPage\mainPage_1.jpg", width: 100%)
]#align(center)[
  圖十四、首頁(上半部)
]
#align(center)[
  #image("UiPicture\mainPage\mainPage_2.jpg", width: 100%)
]
#align(center)[
  圖十五、首頁(下半部)
]

用戶首頁以清晰的卡片式佈局，為學習者提供一個即時的學習狀態總覽，一目了然當前的閱讀進度與整體成就。最上方顯著的學習進度概覽區，以動態的環形進度條展示《紅樓夢》章回完成度，並輔以多個小型數據卡片，如平均理解度、總學習時長等關鍵指標。緊隨其後的是「最近閱讀活動」區塊，採用橫向滾動的書本卡片陳列，方便快速返回上次的閱讀章節或相關的專家解讀。此外，頁面還會展示設定的個人學習目標列表，並以視覺化方式標記已達成和待完成的項目，持續激勵您的學習動力。整體設計延續了應用的典雅中國風，運用溫暖的色調與精緻的圖標，營造出一個既美觀又實用的個人化學習中心。

==== 閱讀頁面
#align(center)[
  #image("UiPicture\ReadingPage\ReadingPage_ChoosingBook_originalText.png", width: 100%)
]#align(center)[
  圖十六、書架(紅樓夢原文)
]
#align(center)[
  #image("UiPicture\ReadingPage\ReadingPage_ChoosingBook_expertText.png", width: 100%)
]#align(center)[
  圖十七、書架(專家解讀內容)
]

「我的書架」頁面採用了清晰直觀的卡片式設計，能輕鬆管理與選擇《紅樓夢》的閱讀資源。頁面頂部通過醒目的「我的書架」標題和選項卡（Tabs）來組織內容，將書籍清晰地劃分為「紅樓夢原文」、「專家解讀」以及「最近學習」三大類別。在每個類別下，用戶可以利用「全部」、「進度」和「分類」等篩選按鈕快速定位書籍，而每本書籍則以獨立的「書籍卡片」形式展示，卡片上包含書本圖標佔位符、書名、作者、簡介以及一個直達閱讀界面的「閱讀」按鈕，整體佈局採用響應式網格，確保在各種設備上均有良好的瀏覽體驗。

在「紅樓夢原文」部分，我們彙集了《紅樓夢》的不同版本，如庚辰本、程甲本等，方便您進行對比閱讀或選擇偏好的版本進行深入研讀，並以「電子書」標籤加以區分。而在「專家解讀」部分，則收錄了如蔣勳、白先勇等學者的權威解讀著作，幫助用戶從多個視角理解這部經典的深層內涵與藝術成就。


#align(center)[
  #image("UiPicture/ReadingPage/readingPage_White.png", width: 100%)
]#align(center)[
  圖十八、閱讀頁面(預設白色主題)顯示白話文功能開啟
]

#align(center)[
  #image("UiPicture/ReadingPage/readingPage_Green.png", width: 100%)
]#align(center)[
  圖十九、閱讀頁面(綠色主題)選取文字顯示文字工作欄位
]

#align(center)[
  #image("UiPicture/ReadingPage/readingPage_Black.png", width: 90%)
]#align(center)[
  圖二十、閱讀頁面(黑色主題)寫筆記功能
]



#align(center)[
  #image("UiPicture/ReadingPage/readingPage_Yellow.png", width: 90%)
]
#align(center)[
  圖二十一、閱讀頁面(黃色主題)問AI功能
]

該閱讀頁面致力於打造一個沉浸式且高度個人化的《紅樓夢》研讀環境。一進入頁面，頂部會呈現一個智能顯隱的工具欄，不僅清晰標示當前章回標題，還集成了返回、目錄以及全螢幕切換等基本導航。更核心的是，它提供了豐富的自訂選項，讀者可以根據偏好調整閱讀背景主題（如白、黃、護眼綠及夜間模式）、選擇包括思源宋體在內的多種字體、無級調整字號大小，並能將文本在單欄、雙欄或三欄佈局間自由切換，以達到最佳閱讀舒適度。正文區域則清晰呈現古典原文，同時允許用戶選擇性開啟或關閉並列的白話文翻譯，對於文中的疑難詞彙或典故，則以小巧的彈出式註解提供即時解釋，確保閱讀的流暢性。

為了深化理解與互動，閱讀頁面整合了多種智能輔助工具。當用戶選取任意文本段落時，會浮現一個快捷操作欄，提供「寫筆記」、「複製」、「問 AI」等功能；「寫筆記」會拉出側邊面板，讓用戶記錄與選文相關的思考，而「問 AI」則能針對選定內容，向特化的《紅樓夢》AI模型提問並獲得解答。此外，頁面還設有獨立的面板來展示當前章回的「知識圖譜」，將人物、事件、概念間的關係視覺化，並提供完整的「目錄」以便在各章回間快速跳轉。這些精心設計的互動功能，旨在將傳統的文本閱讀轉化為一次富有探索性的學習旅程。

==== 成就系統功能
#align(center)[
  #image("UiPicture\achievementPage\achievementPage_1.jpg", width: 90%)
]#align(center)[
  圖二十二、成就頁面：顯示獲得的成就
]
#align(center)[
  #image("UiPicture\achievementPage\achievementPage_2.jpg", width: 90%)
]#align(center)[
  圖二十三、成就頁面：學習進度總覽
]
#align(center)[
  #image("UiPicture\achievementPage\achievementPage_3.jpg", width: 90%)
]#align(center)[
  圖二十四、成就頁面：目標顯示與自行設定目標
]
#align(center)[
  #image("UiPicture\achievementPage\achievementPage_4.jpg", width: 90%)
]#align(center)[
  圖二十六、成就頁面：學習挑戰賽
]

「成就與目標」頁面是「紅樓慧讀」中激勵用戶持續學習的核心空間，整體採用清晰的卡片式佈局，將用戶的學習成果與未來規劃直觀呈現。頁面首先以「我獲得的成就」區塊迎接用戶，將每一個達成的里程碑——無論是完成特定章回閱讀，還是連續登入學習——都化為一枚枚帶有專屬圖標、詳細描述及獲得日期的精緻徽章卡片，並輔以分類標籤，讓學習成就一目了然且富有儀式感。

接著，頁面通過「學習進度總覽」模塊，以數據化方式展現用戶的整體投入，例如總閱讀時長、已完成章回數、筆記數量以及連續學習天數等，並配備醒目的總體進度條，讓用戶對自己的學習軌跡有宏觀的把握。與此同時，「下一步目標」與「設定新的學習目標」兩個區域緊密相連，前者展示系統推薦或用戶正在進行的目標，並以進度條追蹤完成情況；後者則提供多個快捷按鈕，引導用戶根據自身需求，自主設定如每日閱讀時長、章回完成數等個性化學習計畫。

為了進一步提升互動性與參與感，「學習挑戰賽」模塊以選項卡形式整合了每日、每週及特殊主題挑戰，鼓勵用戶參與社群活動，贏取額外獎勵。

==== 知識圖譜頁面
以下為參考Github「KGQA：基於知識圖譜的《紅樓夢》人物關係可視化及問答系統」一專案#super[①]，的介面設計，會參考使用其專案納入專題中實作，作為知識圖譜頁面的主要部分。於圖二十七，用戶可以在搜尋欄輸入紅樓夢角色名字，或是點擊輸入欄下方的名字，即會顯示如左側該位角色的關係圖譜。而後，於圖二十八，顯示總人物關係圖譜的頁面。於上方顏色標籤，可透過點擊決定是否查看該顏色系列人物關係。
#align(center)[
  #image("UiPicture\knowledgeGraphPage\knowledgeGraph_mainPage.jpg", width: 100%)
]
#align(center)[
  圖二十七、知識圖譜頁面：人物檢索
]

#align(center)[
  #image("UiPicture\knowledgeGraphPage\knowledgeGraph_allCharactorPage.jpg", width: 100%)
]#align(center)[
  圖二十八、知識圖譜頁面：總人物圖譜
]

#line(length: 100%)

---
① https://github.com/chizhu/KGQA_HLM

==== 紅學社：社群功能頁面
#align(center)[
  #image("UiPicture\communityPage\communityPage.png", width: 90%)
]
#align(center)[
  圖三十、社群功能頁面
]

「紅學社」頁面致力於打造一個充滿活力的《紅樓夢》愛好者交流空間，整體採用卡片式佈局，方便用戶瀏覽與互動。頁面頂部設有清晰的「紅學社」標題及功能說明，緊接著是一個便捷的搜索框，讓用戶可以快速查找感興趣的發文內容、作者或標籤。已登入的用戶會看到一個簡潔的發文表單，鼓勵他們分享自己的閱讀心得與見解。

下方則以信息流的形式展示所有發文，每一篇發文都是一個獨立的卡片，包含作者、時間戳、可展開的完整內容、相關標籤，並集成了點讚、評論按鈕；點擊評論後，會展開評論區，用戶不僅能看到他人留下的評論，還能親自參與討論，發表自己的看法，形成一個圍繞《紅樓夢》主題的互動學習與分享園地。




== 使用技術

「紅樓慧讀」系統採用現代化的微服務架構設計，結合人工智慧技術與雲端運算基礎設施，打造高效能、可擴展的古典文學學習平台。整體技術選型以穩定性、擴展性和開發效率為核心考量，確保系統能夠支撐大規模用戶同時使用，並提供優質的學習體驗。

==== 前端技術核心架構

系統前端採用現代化的React生態系統，以Next.js作為核心開發框架，提供伺服器端渲染（SSR）和靜態網站生成（SSG）能力，確保優異的用戶體驗和搜尋引擎優化效果。Next.js的應用程式路由（App Router）架構支援檔案基礎的路由系統，簡化頁面組織和導航邏輯，同時提供自動程式碼分割和延遲載入功能，優化系統效能表現。

TypeScript作為主要開發語言，提供靜態型別檢查和智能程式碼補全功能，大幅降低開發過程中的錯誤率並提升程式碼的可維護性。搭配嚴格的型別定義，確保前後端資料介面的一致性和API呼叫的安全性。開發團隊能夠在編譯時期即時發現潛在問題，減少生產環境的錯誤發生率。

用戶介面設計採用Tailwind CSS作為核心樣式框架，透過實用優先（utility-first）的設計理念，實現快速且一致的視覺風格開發。Tailwind CSS的原子化CSS類別系統支援響應式設計和暗色模式切換，確保系統在不同裝置和使用環境下都能提供最佳的視覺體驗。配合PostCSS進行樣式最佳化和處理，進一步減少最終打包檔案的大小。

元件庫整合Shadcn UI作為基礎UI元件解決方案，提供高品質、可重用的用戶介面元件。Shadcn UI基於Radix UI和Tailwind CSS構建，確保元件的可訪問性（Accessibility）和設計一致性。系統中的按鈕、對話框、手風琴選單等互動元件都遵循現代Web標準，支援鍵盤導航和螢幕閱讀器，提升整體用戶體驗的包容性。

動畫與視覺化功能整合Framer Motion動畫庫，為用戶互動提供流暢的視覺反饋和轉場效果。特別是在人物關係圖譜和學習進度視覺化方面，Framer Motion的強大動畫能力能夠創造引人入勝的互動體驗。圖表和資料視覺化採用現代化的圖表庫，支援即時資料更新和互動式探索功能。

狀態管理採用React的內建狀態管理機制，搭配Context API和自訂Hooks實現跨元件的狀態共享。針對複雜的全域狀態需求，整合Zustand或類似的輕量級狀態管理解決方案，避免過度複雜的狀態管理架構。API呼叫和資料快取使用React Query或SWR進行優化，提供自動重新驗證、背景更新和離線支援等進階功能。

==== 後端核心技術架構

系統後端採用Node.js搭配Express.js框架作為核心技術棧，提供高效能的非同步處理能力和豐富的生態系統支援。採用TypeScript進行開發，增強程式碼的可維護性和型別安全性，降低開發過程中的錯誤率。微服務架構設計讓各個功能模組能夠獨立部署和擴展，包括用戶管理服務、學習服務、內容管理服務、AI問答服務、社群服務等，每個服務都具備明確的職責邊界和介面定義。

API Gateway採用Kong或同等級解決方案，提供統一的請求路由、率限控制、CORS設定和請求驗證等功能。系統實作JWT-based驗證機制，搭配OAuth 2.0整合Google、Facebook、Line等社群登入選項，並支援多因子驗證（MFA）提升安全性。角色基礎存取控制（RBAC）確保不同權限的用戶只能存取相應的功能和資料。

==== 資料庫與儲存系統

系統採用多資料庫架構，針對不同類型的資料需求選用最適合的儲存解決方案。PostgreSQL作為主要的關聯式資料庫，負責儲存用戶資訊、章節內容、學習進度、社群討論等結構化資料，並配置連線池和讀取副本以提升效能。Redis作為快取系統和Session儲存，提供高速的資料存取能力，支援智能快取失效策略和叢集部署。

Neo4j圖形資料庫專門處理《紅樓夢》人物關係網絡，提供複雜關係查詢和視覺化支援。所有資料庫都配置自動備份機制，並實作跨區域備份複製以確保資料安全性和災害復原能力。

==== 人工智慧技術

系統的AI功能，使用Perplexity API提供智能問答服務。Perplexity API以其強大的即時資訊檢索功能，為古典文學內容提供準確、詳細的解答。

Perplexity API的整合使系統能夠提供基於最新知識庫的智能回答，支援複雜的古典文學問題解析，包含詞義解釋、文化背景說明、人物性格分析等多層次內容。系統實作智能提示工程和上下文管理機制，將用戶問題與《紅樓夢》特定章節內容相結合，生成具有深度學術價值的個性化解答。

Neo4j圖形資料庫專門用於構建和維護《紅樓夢》人物關係網絡，支援複雜的關係分析和視覺化展示。透過圖形查詢語言Cypher，系統能夠快速檢索人物間的多層次關係，包含血緣關係、社交網絡、情感糾葛等複雜連結。個性化推薦引擎基於用戶行為分析和機器學習演算法，結合Neo4j的關係數據，提供客製化的學習內容和閱讀建議。系統設計包含回應品質評估機制，確保AI生成內容的準確性和相關性。

==== 容器化與雲端部署

系統全面採用Docker容器化技術，確保開發、測試和生產環境的一致性。Kubernetes作為容器編排平台，提供自動擴展、負載均衡、健康檢查和零停機更新等功能。每個微服務都配置適當的資源限制和健康檢查機制，支援自動重啟和故障轉移。

雲端儲存整合AWS S3或Google Cloud Storage等服務，配合CDN提供全球內容分發能力，確保用戶能夠快速存取多媒體內容。檔案上傳系統支援多種格式，包含影像處理、音訊壓縮和病毒掃描等安全檢查功能。

==== 安全性與資料保護

系統實作多層次的安全防護機制，包含輸入驗證、SQL注入防護、XSS保護和CSRF防護等。敏感用戶資料採用AES-256欄位級加密，密碼使用bcrypt進行雜湊處理，並設定高強度的鹽值輪數。帳戶安全機制包含暴力破解保護、可疑活動偵測和自動鎖定功能。

資料隱私保護符合GDPR規範要求，提供資料匯出、刪除和同意管理功能。系統實作完整的稽核日誌記錄，追蹤所有重要操作和存取行為，支援安全事件調查和合規性要求。

==== 監控與效能優化

系統建立完整的監控基礎設施，採用Prometheus收集系統和業務指標，Grafana提供即時儀表板展示。ELK stack（Elasticsearch、Logstash、Kibana）負責日誌管理和分析，Jaeger提供分散式追蹤能力，幫助識別效能瓶頸和系統問題。

效能優化策略包含多層快取設計、資料庫查詢優化、索引策略和連線池管理。系統支援水平擴展，能夠根據流量需求自動調整資源配置。API回應時間和系統可用性都設定明確的SLA目標，並實作自動告警機制。

==== 開發與測試工具

系統採用現代化的開發工具鏈，包含ESLint和Prettier確保程式碼品質，Jest和Supertest提供完整的測試覆蓋率。OpenAPI 3.0規格和Swagger UI提供互動式API文件，便於前後端團隊協作。CI/CD pipeline透過GitHub Actions實現自動化建置、測試和部署流程。

測試策略包含單元測試、整合測試、端到端測試和效能測試，確保系統在各種場景下的穩定性和可靠性。開發環境採用Docker Compose實現本地化部署，讓開發團隊能夠快速建立一致的開發環境。



== 時程規劃：甘特圖

#align(center)[
  #image("miscellaneous\ProjectTimeGanttChart.png", width: 100%)
]
#align(center)[
  圖0：專案時程規劃(圖中紅色為製圖今日線6月3日)
]

在規劃階段 (Planning)，我們將進行主題與動機的研究，時間範圍為2025年2月1日至2025年5月15日。在此期間，我們將確定專案的方向和研究動機，並進行需求調研。

接下來是分析與設計階段 (Analysis & Design)，這一階段的時間為2025年5月20日至2025年6月15日，主要內容包括系統架構的設計和需求分析。

在工作流程階段 (Workflow)，我們將於2025年5月20日至2025年6月15日進行工作流程的規劃，制定開發流程和協作方式。

隨後進入前端開發階段 (UI/Frontend)，這一階段的時間為2025年5月1日至2025年6月15日，將專注於用戶介面的設計和前端功能的實作。

接著是後端開發階段 (Backend)，時間範圍為2025年6月16日至2025年9月30日，主要內容為核心業務邏輯和資料庫的設計實作。

在測試階段 (Testing)，我們將於2025年10月1日至2025年10月15日進行測試與品質保證，內容包括功能測試、整合測試和效能測試。

最後是發布階段 (Release)，這一階段的時間為2025年10月16日至2025年12月31日，將進行系統的上線和後續的維護支援。




= 專案組織分工

#align(center)[
  #image("miscellaneous/teamWorkDistribute.jpg", width: 100%)
]
#align(center)[
  註：O 主要負責人
]

= 未來展望與結論

== 未來展望

隨著人工智慧技術的快速演進與教育數位化趨勢的加速，「紅樓慧讀」系統展現出在古典文學閱讀領域中的高度潛力與前瞻價值。未來，我們將持續強化系統的技術深度與教育應用廣度，拓展更完整的學習生態，實現「從想讀、到讀完、再到讀懂」的全方位目標。

首先，在平台普及化方面，我們計劃開發手機APP版本，讓「紅樓慧讀」能夠觸及更廣泛的用戶群體。行動裝置的普及使得學習能夠隨時隨地進行，透過APP的推出，我們將為用戶提供更便利的學習途徑，突破時空限制，讓古典文學閱讀真正融入現代人的生活節奏中。同時，我們也將持續引入AI語音模型優化古文朗讀品質，拓展學習情境的沉浸感與可及性。

其次，在教育合作發展方面，我們將優先與高中端建立合作關係，目前已鎖定北一女中作為首要合作對象。憑藉團隊與北一女中的同學有既有聯繫關係，我們將開發專門的教學版本，分別針對教師端和學生端設計差異化功能。教師端將提供教學輔助工具、課程管理功能和學習成效分析儀表板，協助老師更有效地進行古典文學教學；學生端則將強化互動學習體驗和同儕協作功能，讓高中生能夠在引導下深度探索《紅樓夢》的文學價值。

在內容發展上，我們將擴充名家解讀庫、引入用戶共創機制，鼓勵用戶貢獻高品質學習筆記與文學見解，進一步強化平台的社群價值與知識深度，實現「共學、共創、共讀」的社群學習目標。同時，我們將建立用戶個人品牌經營機制，讓有影響力的用戶能夠建立自己的學術聲譽和追蹤者社群。透過讓熱門多追蹤數的用戶帶領其餘小用戶，形成真正的社群效應，創造知識分享與傳播的正向循環，讓優質的學習內容和見解能夠在社群中自然傳播和累積。

== 結論

在數位時代背景下，古典文學教育面臨理解門檻高築與學習動機難以維持的雙重困境。《紅樓夢》作為中華文化瑰寶，其深厚的文學價值與複雜的敘事結構，亟需創新的數位化學習解決方案。本專題透過「紅樓慧讀」智能學習系統的設計與開發，成功整合AI技術與教育心理學理論，為古典文學閱讀提供了全新的學習模式。

「紅樓慧讀」系統的核心創新在於四大功能模組的深度整合：動機維持系統透過遊戲化成就機制解決學習持續性問題；AI智能問答與專家解讀建立「即時理解+專業深度」的雙層支撐；視覺化人物關係圖譜有效降低理解門檻；「文化避風港」的情感定位創造獨特品牌價值。系統採用現代化微服務架構，整合Next.js、Node.js、PostgreSQL、Neo4j等多元技術，確保穩定性與擴展性。

從市場競爭角度分析，相較於傳統電子書平台的基礎功能、通用知識服務平台的泛化內容，以及基礎AI工具的獨立對話模式，「紅樓慧讀」實現了專業化、整合化、情感化的三重突破，建立了顯著的差異化競爭優勢。系統不僅解決用戶的核心痛點，更在古典文學閱讀輔助領域開創了新的產品類別。

系統的社會價值體現在文化傳承與教育創新的雙重意義上。透過現代技術重新詮釋古典文學，為年輕世代建立親近傳統文化的橋樑，同時探索AI技術與人文教育結合的新模式，為古典文學教育的數位轉型提供實證案例。隨著行動APP開發、教育機構合作與用戶共創機制的建立，系統將構建完整的古典文學學習生態。

綜合而言，「紅樓慧讀」不僅是數位閱讀工具的創新，更是文化傳承理念的體現。在科技與人文的交匯點上，系統展現了傳統文化與現代技術深度融合的可能性，為「如何讓古典文學在現代社會重新煥發生命力」這一時代課題提供了積極回應。未來，隨著技術持續優化與內容不斷豐富，「紅樓慧讀」將成為連接傳統與現代的重要平台，讓《紅樓夢》的文學魅力在數位時代得到更廣泛傳播與更深入理解。


